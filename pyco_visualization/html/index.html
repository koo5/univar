with global trace:

do_op(op)
{
	action = op.a;
	if (action == "add")
	{
		state = {};
		state.id = op["id"];
		state.parent_id = op["parent_id"];
		if (trace == null)
			trace = state;
		else
			add_state(trace, state);
	}
}

add_state(state, trace):
	if trace.id == state.parent_id:
		trace.children.add(state)
	else:
		for child in trace.children:
			add_state(child, state);


<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<script type="text/javascript" src="vue.js"></script>
	<script type="text/javascript" src="../trace0.js"></script>
	<link rel="stylesheet" href="styles.css">
</head>
<body>
<div id="trace">
	<span v-html="message"></span>
</div>
<script type="text/javascript">
	var vue_det = new Vue({
		el: '#trace',
		data: {
			message: 'My first VueJS Task',
		},
		mounted: function ()
		{
			var update = function(vue_det)
			{
				vue_det.message = window.pyco.frames[window.pyco.pos];
			}
			window.addEventListener('keydown', function (event) {
				c = event.keyCode;
				if (c==188 && window.pyco.pos > 0)
				{
					window.pyco.pos--;
				}
				if (c==190)
				{
					window.pyco.pos++;
				}
				update(vue_det);
			});
			window.pyco.pos  = 0;
			update(this);
		}
	});
</script>
</body>
</html>
